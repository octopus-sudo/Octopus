<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Registro de Vendas</title>
</head>
<body>
  <h2>Registrar Venda</h2>

  <input type="text" id="vendaInput" placeholder="Digite a venda">
  <button id="botaoEnviar" onclick="registrarVenda()">Enviar</button>

  <p id="mensagem"></p>

  <script>
    // Aqui está a função completa
    function registrarVenda() {
      const texto = document.getElementById("vendaInput").value;
      const botao = document.getElementById("botaoEnviar");
      const mensagem = document.getElementById("mensagem");

      if (!texto.trim()) {
        mensagem.textContent = "Por favor, digite uma venda.";
        return;
      }

      botao.disabled = true;
      botao.textContent = "Enviando...";

      fetch("https://script.google.com/macros/s/AKfycbwXppHw4j12FerhCixxP4CC2YkRihdxIGSpGpdT-ScBwbIGEmF3EmPhE5tjJmvGhUHi3g/exec", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "texto=" + encodeURIComponent(texto)
      })
      .then(response => response.text())
      .then(data => {
        mensagem.textContent = "Venda registrada com sucesso!";
        document.getElementById("vendaInput").value = "";

        // Apaga a mensagem após 3 segundos
        setTimeout(() => {
          mensagem.textContent = "";
        }, 3000);
      })
      .catch(error => {
        mensagem.textContent = "Erro ao registrar venda.";
        console.error("Erro:", error);

        // Também apaga a mensagem de erro após 3 segundos
        setTimeout(() => {
          mensagem.textContent = "";
        }, 3000);
      })
      .finally(() => {
        botao.disabled = false;
        botao.textContent = "Enviar";
      });
    }
  </script>
</body>
</html>
